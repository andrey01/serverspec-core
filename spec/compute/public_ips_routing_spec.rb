require 'spec_helper'

describe command('ip route show table 111 | sort') do
    table = %q{104.130.85.216 dev bond0.279  scope link 
104.130.85.219 dev bond0.279  scope link 
108.166.27.84 dev bond0.279  scope link 
108.166.27.85 dev bond0.279  scope link 
108.166.27.86 dev bond0.279  scope link 
108.166.27.87 dev bond0.279  scope link 
108.171.171.224 dev bond0.279  scope link 
108.171.171.225 dev bond0.279  scope link 
108.171.171.226 dev bond0.279  scope link 
108.171.171.227 dev bond0.279  scope link 
108.171.171.228 dev bond0.279  scope link 
108.171.171.230 dev bond0.279  scope link 
108.171.171.231 dev bond0.279  scope link 
108.171.171.232 dev bond0.279  scope link 
108.171.171.233 dev bond0.279  scope link 
108.171.171.234 dev bond0.279  scope link 
108.171.171.235 dev bond0.279  scope link 
108.171.171.236 dev bond0.279  scope link 
108.171.171.237 dev bond0.279  scope link 
108.171.171.238 dev bond0.279  scope link 
108.171.171.239 dev bond0.279  scope link 
108.171.171.240 dev bond0.279  scope link 
108.171.171.241 dev bond0.279  scope link 
108.171.171.242 dev bond0.279  scope link 
108.171.171.243 dev bond0.279  scope link 
108.171.171.244 dev bond0.279  scope link 
108.171.171.245 dev bond0.279  scope link 
108.171.171.246 dev bond0.279  scope link 
108.171.171.247 dev bond0.279  scope link 
108.171.171.248 dev bond0.279  scope link 
108.171.171.249 dev bond0.279  scope link 
108.171.171.250 dev bond0.279  scope link 
108.171.171.251 dev bond0.279  scope link 
108.171.171.252 dev bond0.279  scope link 
108.171.171.253 dev bond0.279  scope link 
108.171.171.254 dev bond0.279  scope link 
108.171.171.255 dev bond0.279  scope link 
162.242.190.24 dev bond0.279  scope link 
162.242.190.25 dev bond0.279  scope link 
162.242.190.26 dev bond0.279  scope link 
162.242.190.27 dev bond0.279  scope link 
162.242.190.28 dev bond0.279  scope link 
162.242.190.29 dev bond0.279  scope link 
162.242.190.30 dev bond0.279  scope link 
162.242.190.31 dev bond0.279  scope link 
166.78.217.0 dev bond0.279  scope link 
166.78.217.1 dev bond0.279  scope link 
166.78.217.2 dev bond0.279  scope link 
166.78.217.3 dev bond0.279  scope link 
166.78.217.4 dev bond0.279  scope link 
166.78.217.5 dev bond0.279  scope link 
166.78.217.7 dev bond0.279  scope link 
166.78.234.104 dev bond0.279  scope link 
166.78.234.105 dev bond0.279  scope link 
166.78.234.106 dev bond0.279  scope link 
166.78.234.107 dev bond0.279  scope link 
166.78.234.108 dev bond0.279  scope link 
166.78.234.109 dev bond0.279  scope link 
166.78.234.110 dev bond0.279  scope link 
166.78.234.111 dev bond0.279  scope link 
166.78.83.216 dev bond0.279  scope link 
166.78.83.217 dev bond0.279  scope link 
166.78.83.218 dev bond0.279  scope link 
166.78.83.219 dev bond0.279  scope link 
166.78.83.220 dev bond0.279  scope link 
166.78.83.221 dev bond0.279  scope link 
166.78.83.222 dev bond0.279  scope link 
166.78.83.223 dev bond0.279  scope link 
184.106.63.188 dev bond0.279  scope link 
184.106.63.189 dev bond0.279  scope link 
184.106.63.190 dev bond0.279  scope link 
184.106.63.191 dev bond0.279  scope link 
192.237.128.28 dev bond0.279  scope link 
192.237.128.29 dev bond0.279  scope link 
192.237.128.30 dev bond0.279  scope link 
192.237.128.31 dev bond0.279  scope link 
192.237.146.232 dev bond0.279  scope link 
192.237.146.233 dev bond0.279  scope link 
192.237.146.234 dev bond0.279  scope link 
192.237.146.235 dev bond0.279  scope link 
192.237.146.236 dev bond0.279  scope link 
192.237.146.237 dev bond0.279  scope link 
192.237.146.238 dev bond0.279  scope link 
192.237.146.239 dev bond0.279  scope link 
192.237.146.240 dev bond0.279  scope link 
192.237.146.241 dev bond0.279  scope link 
192.237.146.242 dev bond0.279  scope link 
192.237.146.243 dev bond0.279  scope link 
192.237.146.244 dev bond0.279  scope link 
192.237.146.245 dev bond0.279  scope link 
192.237.146.246 dev bond0.279  scope link 
192.237.146.247 dev bond0.279  scope link 
192.237.146.248 dev bond0.279  scope link 
192.237.146.249 dev bond0.279  scope link 
192.237.146.250 dev bond0.279  scope link 
192.237.146.251 dev bond0.279  scope link 
192.237.146.252 dev bond0.279  scope link 
192.237.146.253 dev bond0.279  scope link 
192.237.146.254 dev bond0.279  scope link 
192.237.146.255 dev bond0.279  scope link 
23.253.25.10 dev bond0.279  scope link 
23.253.25.8 dev bond0.279  scope link 
23.253.25.9 dev bond0.279  scope link 
23.253.9.192 dev bond0.279  scope link 
23.253.9.193 dev bond0.279  scope link 
23.253.9.194 dev bond0.279  scope link 
23.253.9.195 dev bond0.279  scope link 
23.253.9.196 dev bond0.279  scope link 
23.253.9.197 dev bond0.279  scope link 
23.253.9.198 dev bond0.279  scope link 
23.253.9.199 dev bond0.279  scope link 
23.253.9.200 dev bond0.279  scope link 
23.253.9.201 dev bond0.279  scope link 
23.253.9.202 dev bond0.279  scope link 
23.253.9.203 dev bond0.279  scope link 
23.253.9.204 dev bond0.279  scope link 
23.253.9.205 dev bond0.279  scope link 
23.253.9.206 dev bond0.279  scope link 
23.253.9.207 dev bond0.279  scope link 
50.56.10.128 dev bond0.279  scope link 
50.56.10.129 dev bond0.279  scope link 
50.56.10.130 dev bond0.279  scope link 
50.56.10.131 dev bond0.279  scope link 
50.56.10.132 dev bond0.279  scope link 
50.56.10.133 dev bond0.279  scope link 
50.56.10.134 dev bond0.279  scope link 
50.56.10.135 dev bond0.279  scope link 
50.56.10.136 dev bond0.279  scope link 
50.56.10.137 dev bond0.279  scope link 
50.56.10.138 dev bond0.279  scope link 
50.56.10.139 dev bond0.279  scope link 
50.56.10.140 dev bond0.279  scope link 
50.56.10.141 dev bond0.279  scope link 
50.56.10.142 dev bond0.279  scope link 
50.56.10.143 dev bond0.279  scope link 
50.56.10.144 dev bond0.279  scope link 
50.56.10.145 dev bond0.279  scope link 
50.56.10.146 dev bond0.279  scope link 
50.56.10.147 dev bond0.279  scope link 
50.56.10.148 dev bond0.279  scope link 
50.56.10.149 dev bond0.279  scope link 
50.56.10.150 dev bond0.279  scope link 
50.56.10.151 dev bond0.279  scope link 
50.56.10.152 dev bond0.279  scope link 
50.56.10.153 dev bond0.279  scope link 
50.56.10.154 dev bond0.279  scope link 
50.56.10.155 dev bond0.279  scope link 
50.56.10.156 dev bond0.279  scope link 
50.56.10.157 dev bond0.279  scope link 
50.56.10.158 dev bond0.279  scope link 
50.56.10.159 dev bond0.279  scope link 
50.56.43.208 dev bond0.279  scope link 
50.56.43.209 dev bond0.279  scope link 
50.56.43.210 dev bond0.279  scope link 
50.56.43.211 dev bond0.279  scope link 
50.56.43.212 dev bond0.279  scope link 
50.56.43.213 dev bond0.279  scope link 
50.56.43.214 dev bond0.279  scope link 
50.56.43.215 dev bond0.279  scope link 
50.56.43.216 dev bond0.279  scope link 
50.56.43.217 dev bond0.279  scope link 
50.56.43.218 dev bond0.279  scope link 
50.56.43.219 dev bond0.279  scope link 
50.56.43.220 dev bond0.279  scope link 
50.56.43.221 dev bond0.279  scope link 
50.56.43.222 dev bond0.279  scope link 
50.56.43.223 dev bond0.279  scope link 
}
    its(:stdout) { should eq table }
end

describe file('/etc/opt/cloud/public.in') do
  it { should contain 'PUBLIC_IPS=`echo 108.171.171.{230..255} 108.171.171.{224..228} 162.242.190.{24..25} 166.78.83.{216..223} 166.78.234.{104..111} 166.78.217.{0..5} 166.78.217.7 192.237.128.{28..31} 192.237.146.{232..238} 192.237.146.{240..255} 162.242.190.{26..30} 184.106.63.{188..191} 23.253.9.{192..204} 23.253.25.{8..10} 23.253.9.{205..207} 50.56.10.{128..159} 50.56.43.{208..223} 104.130.85.216 104.130.85.219 108.166.27.{84..87} 162.242.190.31 192.237.146.239`' }
end
